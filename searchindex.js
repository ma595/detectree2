Search.setIndex({"docnames": ["contribution", "detectree2", "detectree2.data_loading", "detectree2.models", "detectree2.preprocessing", "detectree2.tests", "index", "modules", "tutorial", "usage"], "filenames": ["contribution.rst", "detectree2.rst", "detectree2.data_loading.rst", "detectree2.models.rst", "detectree2.preprocessing.rst", "detectree2.tests.rst", "index.rst", "modules.rst", "tutorial.rst", "usage.rst"], "titles": ["Contribution guide", "detectree2 package", "detectree2.data_loading package", "detectree2.models package", "detectree2.preprocessing package", "detectree2.tests package", "Detectree2", "detectree2", "Tutorial", "Usage"], "terms": {"lint": 0, "flake8": 0, "autopep8": 0, "vscode": 0, "setup": 0, "don": 0, "t": 0, "merg": 0, "code": [0, 3, 6], "unless": 0, "all": [0, 3], "ar": [0, 3, 4, 8], "pass": 0, "alwai": 0, "write": 0, "newli": 0, "introduc": 0, "logic": 0, "when": [0, 3, 8], "collabor": 0, "v": 0, "contributor": 0, "privileg": 0, "fork": 0, "repo": [0, 6], "etc": 0, "squash": 0, "commit": 0, "set": [0, 8], "up": [0, 3, 4, 8], "github": [0, 3, 6], "action": 0, "data_load": [1, 7], "gdrive": [1, 7], "gdrive_load": [1, 7], "gee_download": [1, 7], "quickstart": [1, 7], "model": [1, 4, 6, 7], "evalu": [1, 4, 6, 7], "output": [1, 4, 7], "predict": [1, 4, 6, 7], "test": [1, 4, 7, 8], "train": [1, 4, 6, 7], "train_tun": [1, 7], "preprocess": [1, 7, 8], "crown": [1, 3, 7, 8], "tile": [1, 3, 7, 8], "test_al": [1, 7], "test_data": [1, 7], "test_model": [1, 7], "test_preprocess": [1, 7], "perform": [3, 6], "class": [3, 5], "function": [3, 4, 8], "featur": [3, 4], "filenam": [3, 4], "directori": [3, 8], "number": 3, "lidar_filenam": 3, "lidar_img": 3, "epsg": 3, "base": [3, 5, 6, 8], "object": [3, 4], "store": 3, "longer": 3, "inform": 3, "get_tuple_coord": 3, "coord": 3, "convert": 3, "coordin": [3, 4], "data": [3, 4, 6], "structur": [3, 4, 8], "from": [3, 4, 8], "list": 3, "tupl": 3, "poly_area": 3, "calcul": 3, "area": 3, "scale": 3, "geojson": [3, 8], "tree_height": 3, "crop": 3, "lidar": 3, "tif": [3, 8], "height": [3, 4], "95thpercentil": 3, "greatest": 3, "account": 3, "error": 3, "top": 3, "end": 3, "If": [3, 8], "file": [3, 4, 8], "i": [3, 4, 6, 8], "input": [3, 4, 8], "than": [3, 8], "given": 3, "0": [3, 4, 8], "f1_cal": 3, "precis": 3, "recal": 3, "f1": 3, "score": 3, "feat_threshold_test": 3, "feature_inst": 3, "conf_threshold": 3, "area_threshold": 3, "border_filt": 3, "tile_width": [3, 4, 8], "complet": [3, 4], "see": [3, 8], "should": [3, 4, 8], "consid": 3, "valid": [3, 4, 8], "check": [3, 4], "abov": 3, "confid": 3, "threshold": [3, 4, 8], "avail": [3, 8], "onli": [3, 8], "appli": 3, "case": [3, 4], "filter": [3, 8], "out": 3, "too": 3, "small": 3, "which": 3, "often": 3, "an": [3, 6, 8], "adjac": 3, "have": [3, 4, 8], "bit": 3, "spilt": 3, "over": 3, "remov": [3, 8], "within": 3, "border": 3, "edg": 3, "size": [3, 8], "proport": [3, 4, 8], "width": [3, 4], "feats_tall_enough": 3, "all_feat": 3, "min_height": 3, "minimun": 3, "find_intersect": 3, "all_test_feat": 3, "all_pred_feat": 3, "find": 3, "intersect": 3, "between": [3, 4], "manual": [3, 8], "updat": 3, "get_tile_width": 3, "split": [3, 4], "name": 3, "get": [3, 4, 8], "buffer": [3, 4, 8], "ad": 3, "overal": 3, "initialise_feat": 3, "creat": 3, "positives_test": 3, "min_iou": 3, "determin": 3, "true": 3, "postiv": 3, "fals": [3, 4], "posit": 3, "neg": 3, "aris": 3, "prec_recall_func": 3, "total_tp": 3, "total_fp": 3, "total_fn": 3, "standard": 3, "formula": 3, "save_feat": 3, "tile_directori": 3, "collat": 3, "back": 3, "save": 3, "site_f1_scor": 3, "none": [3, 4], "test_directori": 3, "pred_directori": 3, "iou_threshold": 3, "5": [3, 8], "height_threshold": 3, "area_fraction_limit": 3, "0005": 3, "shape": 3, "pair": 3, "correspond": [3, 4, 8], "polygon": [3, 4, 8], "arg": [3, 4, 8], "path": [3, 8], "folder": [3, 8], "contain": 3, "just": [3, 8], "reproject": 3, "imag": [3, 4, 6], "entir": 3, "region": 3, "minimum": 3, "valu": 3, "iou": 3, "can": [3, 4, 8], "less": 3, "thi": [3, 4], "ignor": 3, "so": 3, "bool": [3, 4], "whether": 3, "us": [3, 4, 8, 9], "relat": 3, "x": 3, "y": 3, "tree": [3, 6, 8], "locat": [3, 6], "tell": 3, "program": 3, "process": 3, "clean": 3, "funtion": 3, "map": 3, "geograph": 3, "space": 3, "box_filt": 3, "shift": 3, "int": [3, 4], "bound": 3, "box": [3, 4], "box_mak": 3, "minx": 3, "mini": 3, "cr": [3, 8], "gener": [3, 4, 6], "specif": 3, "calc_iou": 3, "shape1": 3, "shape2": 3, "two": [3, 8], "clean_crown": 3, "geodatafram": [3, 4], "7": 3, "overlap": [3, 4, 8], "highli": 3, "includ": [3, 8], "high": 3, "degre": 3, "other": 3, "lower": 3, "filename_geoinfo": 3, "return": [3, 4], "info": 3, "its": 3, "polygon_from_mask": 3, "masked_arr": 3, "rle": 3, "instanc": 3, "lead": 3, "about": 3, "loss": 3, "doe": 3, "affect": 3, "http": [3, 6], "com": [3, 6], "hazirba": 3, "coco": [3, 8], "json": [3, 4], "blob": 3, "master": 3, "generate_coco_json": 3, "py": 3, "found": 3, "here": [3, 6, 8], "project_to_geojson": 3, "output_fold": 3, "pred_fold": 3, "project": [3, 4, 6], "take": [3, 4], "chang": 3, "overlai": 3, "orthomosa": [3, 4, 8], "anoth": 3, "copi": 3, "produc": 3, "png": 3, "stitch_crown": 3, "str": [3, 4], "1": [3, 4, 6], "stitch": 3, "togeth": 3, "to_eval_geojson": 3, "These": 4, "make": [4, 8], "landscap": [4, 6], "get_featur": 4, "gdf": 4, "pars": 4, "manner": 4, "rasterio": [4, 8], "want": 4, "them": 4, "geopanda": [4, 8], "datafram": 4, "style": 4, "image_detail": 4, "fileroot": 4, "without": 4, "extens": 4, "is_overlapping_box": 4, "test_boxes_arrai": 4, "train_box": 4, "ani": 4, "boolean": 4, "tile_data": 4, "datasetread": 4, "out_dir": [4, 8], "30": [4, 8], "200": 4, "tile_height": [4, 8], "dtype_bool": 4, "full": 4, "othomosa": 4, "manag": 4, "chunk": 4, "tile_data_train": [4, 8], "A": [4, 8], "bug": 4, "exist": 4, "some": 4, "raster": 4, "type": 4, "wherebi": 4, "black": 4, "argument": 4, "switch": 4, "utm": [4, 8], "meter": 4, "flag": 4, "edit": 4, "dtype": 4, "prevent": 4, "option": 4, "float": 4, "ensur": [4, 8], "good": 4, "coverag": 4, "across": [4, 8], "do": 4, "suffici": 4, "reject": 4, "min": 4, "cover": 4, "accept": 4, "to_traintest_fold": [4, 8], "tiles_fold": 4, "out_fold": 4, "test_frac": [4, 8], "2": [4, 6], "fold": [4, 8], "send": [4, 8], "dir": 4, "automat": [4, 8], "sure": 4, "testcas": 5, "methodnam": 5, "runtest": 5, "test_upp": 5, "detectron2": [6, 8], "mask": 6, "r": 6, "cnn": 6, "architectur": 6, "aerial": 6, "It": [6, 8], "ha": 6, "been": 6, "design": 6, "delin": 6, "challeng": 6, "dens": [6, 8], "tropic": 6, "forest": 6, "rang": 6, "ecolog": 6, "applic": 6, "exampl": [6, 8], "made": 6, "develop": 6, "seb": 6, "hickman": 6, "jame": 6, "ball": 6, "thoma": 6, "koai": 6, "panagioti": 6, "ioannou": 6, "hinton": 6, "ecologi": 6, "conserv": 6, "group": 6, "univers": 6, "cambridg": 6, "The": [6, 8], "led": 6, "professor": 6, "david": 6, "coom": 6, "part": [6, 8], "research": 6, "institut": 6, "origin": 6, "mre": 6, "shmh40": 6, "detectreergb": 6, "usag": 6, "instal": [6, 8], "tutori": 6, "prepar": 6, "3": 6, "4": 6, "index": 6, "modul": [6, 7, 8], "search": 6, "page": 6, "packag": 7, "subpackag": 7, "submodul": 7, "content": [7, 8], "constant": 7, "level": 8, "befor": 8, "start": 8, "detectree2": [8, 9], "either": 8, "through": 8, "venv": [8, 9], "pip": [8, 9], "conda": 8, "c": 8, "forg": 8, "To": [8, 9], "you": 8, "need": 8, "orthmosa": 8, "polgon": 8, "readabl": 8, "e": 8, "g": 8, "crowns_polygon": 8, "gpkg": 8, "shp": 8, "For": 8, "best": 8, "result": 8, "suppli": 8, "cluster": 8, "rather": 8, "spars": 8, "scatter": 8, "would": 8, "like": 8, "pre": 8, "model_garden": 8, "skip": 8, "recommend": 8, "new": 8, "follow": 8, "danum": 8, "site": 8, "rgb": 8, "dan_2014_rgb_project_to_chm": 8, "local": 8, "geopackag": 8, "shapefil": 8, "parac": 8, "paracou_rgb_2016_10cm": 8, "paracou_rgb_2019": 8, "updatedcrowns8": 8, "we": 8, "multipl": 8, "phase": 8, "singl": 8, "requir": 8, "sever": 8, "call": 8, "": 8, "import": 8, "register_train_data": 8, "mytrain": 8, "setup_cfg": 8, "gpd": 8, "site_path": 8, "drive": 8, "shareddr": 8, "img_path": 8, "2016": 8, "crown_path": 8, "220619_allsplabel": 8, "read": 8, "tiff": 8, "open": 8, "attribut": 8, "read_fil": 8, "to_cr": 8, "paramet": 8, "depend": 8, "resolut": 8, "your": 8, "imageri": 8, "40": 8, "6": 8, "next": 8, "sub": 8, "k": 8, "cross": 8, "approxim": 8, "reserv": 8, "spatial": 8, "separ": 8, "data_fold": 8, "15": 8, "now": 8, "partit": 8, "fold_1": 8, "fold_2": 8, "regist": 8, "possibl": 8, "train_loc": 8, "val_fold": 8, "base_model": 8, "model_zoo": 8, "instancesegment": 8, "mask_rcnn_r_101_fpn_3x": 8, "yaml": 8, "trained_model": 8, "220629_paracousepilokdanum_jb": 8, "pth": 8, "paracou_train": 8, "paracou2019_train": 8, "paracouuav_train": 8, "danum_train": 8, "sepilokeast_train": 8, "sepilokwest_train": 8, "paracou_v": 8, "paracou2019_v": 8, "paracouuav_v": 8, "danum_v": 8, "sepilokeast_v": 8, "sepilokwest_v": 8, "220809_train_output": 8, "cfg": 8, "worker": 8, "eval_period": 8, "100": 8, "max_it": 8, "3000": 8, "update_model": 8, "load": 8, "first": 9}, "objects": {"": [[1, 0, 0, "-", "detectree2"]], "detectree2": [[2, 0, 0, "-", "data_loading"], [3, 0, 0, "-", "models"], [4, 0, 0, "-", "preprocessing"], [5, 0, 0, "-", "tests"]], "detectree2.data_loading": [[2, 0, 0, "-", "gdrive_load"]], "detectree2.models": [[3, 0, 0, "-", "evaluation"], [3, 0, 0, "-", "models"], [3, 0, 0, "-", "outputs"], [3, 0, 0, "-", "test"], [3, 0, 0, "-", "train_tune"]], "detectree2.models.evaluation": [[3, 1, 1, "", "Feature"], [3, 3, 1, "", "f1_cal"], [3, 3, 1, "", "feat_threshold_tests"], [3, 3, 1, "", "feats_tall_enough"], [3, 3, 1, "", "find_intersections"], [3, 3, 1, "", "get_tile_width"], [3, 3, 1, "", "initialise_feats"], [3, 3, 1, "", "positives_test"], [3, 3, 1, "", "prec_recall_func"], [3, 3, 1, "", "save_feats"], [3, 3, 1, "", "site_f1_score"]], "detectree2.models.evaluation.Feature": [[3, 2, 1, "", "get_tuple_coords"], [3, 2, 1, "", "poly_area"], [3, 2, 1, "", "tree_height"]], "detectree2.models.outputs": [[3, 3, 1, "", "box_filter"], [3, 3, 1, "", "box_make"], [3, 3, 1, "", "calc_iou"], [3, 3, 1, "", "clean_crowns"], [3, 3, 1, "", "filename_geoinfo"], [3, 3, 1, "", "polygon_from_mask"], [3, 3, 1, "", "project_to_geojson"], [3, 3, 1, "", "stitch_crowns"], [3, 3, 1, "", "to_eval_geojson"]], "detectree2.preprocessing": [[4, 0, 0, "-", "crowns"], [4, 0, 0, "-", "tiling"]], "detectree2.preprocessing.tiling": [[4, 3, 1, "", "get_features"], [4, 3, 1, "", "image_details"], [4, 3, 1, "", "is_overlapping_box"], [4, 3, 1, "", "tile_data"], [4, 3, 1, "", "tile_data_train"], [4, 3, 1, "", "to_traintest_folders"]], "detectree2.tests": [[5, 0, 0, "-", "test_all"], [5, 0, 0, "-", "test_data"], [5, 0, 0, "-", "test_models"], [5, 0, 0, "-", "test_preprocessing"]], "detectree2.tests.test_data": [[5, 1, 1, "", "TestCase"]], "detectree2.tests.test_data.TestCase": [[5, 2, 1, "", "test_upper"]], "detectree2.tests.test_models": [[5, 1, 1, "", "TestCase"]], "detectree2.tests.test_models.TestCase": [[5, 2, 1, "", "test_upper"]], "detectree2.tests.test_preprocessing": [[5, 1, 1, "", "TestCase"]], "detectree2.tests.test_preprocessing.TestCase": [[5, 2, 1, "", "test_upper"]]}, "objtypes": {"0": "py:module", "1": "py:class", "2": "py:method", "3": "py:function"}, "objnames": {"0": ["py", "module", "Python module"], "1": ["py", "class", "Python class"], "2": ["py", "method", "Python method"], "3": ["py", "function", "Python function"]}, "titleterms": {"contribut": 0, "guid": 0, "doc": 0, "style": 0, "test": [0, 3, 5], "submit": 0, "pr": 0, "continu": 0, "integr": 0, "detectree2": [1, 2, 3, 4, 5, 6, 7], "packag": [1, 2, 3, 4, 5], "subpackag": 1, "submodul": [1, 2, 3, 4, 5], "constant": 1, "modul": [1, 2, 3, 4, 5], "content": [1, 2, 3, 4, 5, 6], "data_load": 2, "gdrive": 2, "gdrive_load": 2, "gee_download": 2, "quickstart": 2, "model": [3, 8], "evalu": [3, 8], "output": 3, "predict": [3, 8], "train": [3, 8], "train_tun": 3, "preprocess": 4, "crown": 4, "tile": 4, "test_al": 5, "test_data": 5, "test_model": 5, "test_preprocess": 5, "indic": 6, "tabl": 6, "tutori": 8, "1": 8, "prepar": 8, "data": 8, "2": 8, "3": 8, "perform": 8, "4": 8, "gener": 8, "landscap": 8, "usag": 9, "instal": 9}, "envversion": {"sphinx.domains.c": 2, "sphinx.domains.changeset": 1, "sphinx.domains.citation": 1, "sphinx.domains.cpp": 6, "sphinx.domains.index": 1, "sphinx.domains.javascript": 2, "sphinx.domains.math": 2, "sphinx.domains.python": 3, "sphinx.domains.rst": 2, "sphinx.domains.std": 2, "sphinx": 56}})